import { extendTheme, type ThemeConfig } from '@chakra-ui/react';
import { mode, type StyleFunctionProps } from '@chakra-ui/theme-tools';

// 1. Theme configuration
const config: ThemeConfig = {
  initialColorMode: 'light',
  useSystemColorMode: true,
  disableTransitionOnChange: false,
};

// 2. Color palette
const colors = {
  brand: {
    50: '#f9f0ff',
    100: '#f0d9ff',
    200: '#e0b3ff',
    300: '#c980ff',
    400: '#b24dff',
    500: '#9D20BD', // Primary brand color
    600: '#8a1aa7',
    700: '#771391',
    800: '#630d7a',
    900: '#500864',
  },
};

// 3. Semantic tokens
const semanticTokens = {
  colors: {
    'chakra-body-text': { _light: 'gray.800', _dark: 'whiteAlpha.900' },
    'chakra-body-bg': { _light: 'white', _dark: 'gray.900' },
    'chakra-border-color': { _light: 'gray.200', _dark: 'whiteAlpha.300' },
    'chakra-subtle-bg': { _light: 'gray.50', _dark: 'gray.800' },
    'chakra-placeholder-color': { _light: 'gray.500', _dark: 'whiteAlpha.400' },
  },
};

// 4. Typography
const fonts = {
  heading: `'Poppins', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif`,
  body: `'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif`,
  mono: `'Fira Code', 'SFMono-Regular', Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace`,
};

// 5. Global styles
const styles = {
  global: (props: StyleFunctionProps) => ({
    'html, body': {
      margin: 0,
      padding: 0,
      boxSizing: 'border-box',
      scrollBehavior: 'smooth',
      bg: mode('white', 'gray.900')(props),
      color: mode('gray.800', 'whiteAlpha.900')(props),
    },
    '*, *::before, *::after': {
      boxSizing: 'inherit',
    },
    '::-webkit-scrollbar': {
      width: '8px',
      height: '8px',
    },
    '::-webkit-scrollbar-track': {
      bg: 'transparent',
    },
    '::-webkit-scrollbar-thumb': {
      bg: mode('gray.300', 'gray.600')(props),
      borderRadius: '4px',
      '&:hover': {
        bg: mode('gray.400', 'gray.500')(props),
      },
    },
    '::selection': {
      bg: 'brand.500',
      color: 'white',
    },
  }),
};

// 6. Component styles
const components = {
  Button: {
    baseStyle: {
      fontWeight: 'semibold',
      borderRadius: 'xl',
      transition: 'all 0.2s ease-in-out',
      _hover: {
        transform: 'translateY(-1px)',
        _disabled: {
          transform: 'none',
        },
      },
      _active: {
        transform: 'translateY(0)',
      },
    },
    variants: {
      solid: (props: StyleFunctionProps) => ({
        bg: 'brand.500',
        color: 'white',
        _hover: {
          bg: 'brand.600',
          _disabled: {
            bg: 'brand.500',
          },
        },
      }),
      outline: (props: StyleFunctionProps) => ({
        border: '2px solid',
        borderColor: 'brand.500',
        color: 'brand.500',
        _hover: {
          bg: 'brand.50',
        },
      }),
      ghost: (props: StyleFunctionProps) => ({
        color: 'brand.500',
        _hover: {
          bg: 'brand.50',
        },
      }),
    },
    defaultProps: {
      variant: 'solid',
    },
            borderColor: 'brand.500',
            boxShadow: `0 0 0 1px ${props.theme.colors.brand[500]}`,
          },
          _invalid: {
            borderColor: 'red.500',
            boxShadow: `0 0 0 1px ${props.theme.colors.red[500]}`,
          },
        },
      }),
    },
    defaultProps: {
      variant: 'outline',
    },
  },
  Card: {
    baseStyle: (props: StyleFunctionProps) => ({
      container: {
        bg: mode('white', 'gray.800')(props),
        borderRadius: 'xl',
        boxShadow: 'sm',
        transition: 'all 0.2s ease-in-out',
        _hover: {
          boxShadow: 'md',
          transform: 'translateY(-2px)',
        },
      },
    }),
  },
  Link: {
    baseStyle: {
      color: 'brand.500',
      _hover: {
        textDecoration: 'none',
        color: 'brand.600',
      },
    },
  },
};

// Breakpoints for responsive design
const breakpoints = {
  sm: '30em', // 480px
  md: '48em', // 768px
  lg: '62em', // 992px
  xl: '80em', // 1280px
  '2xl': '96em', // 1536px
};

type CustomTheme = typeof theme;

declare module '@chakra-ui/react' {
  interface Theme extends CustomTheme {}
}
        color: 'brand.primary',
        _hover: {
          bg: 'whiteAlpha.200',
          color: 'white',
        },
      }),
    },
    defaultProps: {
      variant: 'gradient',
    },
  },
  Card: {
    baseStyle: {
      container: {
        borderRadius: 'xl',
        boxShadow: 'xl',
        transition: 'all 0.3s ease-in-out',
        _hover: {
          transform: 'translateY(-5px)',
          boxShadow: '2xl',
        },
      },
    },
    variants: {
      elevated: {
        bg: 'white',
        border: '1px solid',
        borderColor: 'gray.100',
      },
      gradient: {
        bg: 'linear-gradient(145deg, white 0%, #f9f5ff 100%)',
        border: '1px solid',
        borderColor: 'purple.50',
      },
    },
  },
  Heading: {
    baseStyle: {
      fontWeight: 'bold',
      letterSpacing: 'tighter',
      bgGradient: 'linear(to-r, brand.primary, brand.secondary)',
      bgClip: 'text',
    },
  },
  Link: {
    baseStyle: {
      color: 'brand.primary',
      _hover: {
        textDecoration: 'none',
        color: 'brand.secondary',
      },
    },
  },
};

const theme = extendTheme({
  config,
  colors,
  fonts,
  styles,
  components,
  shadows: {
    outline: '0 0 0 3px var(--chakra-colors-brand-500)',
  },
}) as CustomTheme;

export default theme;
